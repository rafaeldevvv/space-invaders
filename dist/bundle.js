(()=>{"use strict";var s={4812:(e,t,s)=>{s.d(t,{Z:()=>n});var t=s(8081),t=s.n(t),i=s(3645),s=s.n(i)()(t());s.push([e.id,`button {
   background: none;
   cursor: pointer;
   font-family: inherit;
}

.btn-container {
   position: fixed;
   inset: auto auto 2.5% 50%;
   transform: translate(-50%);
   display: grid;
   gap: 1.2rem .8rem;
}

.btn-container--state-start {
   grid-template-areas:
      "slider"
      "start";
}

.btn-container--state-running {
   grid-template-areas:
      "slider slider slider"
      "fire   left   right"
      "pause  pause  pause";
}

.btn-container--state-lost {
   grid-template-areas:
      "slider"
      "restart";
}

.btn-container__btn {
   --shadow-color: ;
   --bg: ;
   --area: ;

   font-size: 1.7rem;
   color: black;
   -webkit-user-select: none;
      -moz-user-select: none;
           user-select: none;

   border: 2px solid var(--shadow-color);
   padding: .5rem 1rem;

   position: relative;
   z-index: 0;
   transform: translateY(-7px);

   box-shadow: 0 7px var(--shadow-color);
   background-color: var(--bg);

   grid-area: var(--area);
}

.btn-container__btn.active,
.btn-container__btn:active {
   transform: translateY(0px);
   box-shadow: 0 0px var(--shadow-color);
}

.fire-btn {
   --area: fire;
   --bg: hsl(0 100% 70%);
   --shadow-color: hsl(0 100% 25%);
}

.move-right-btn {
   --area: right;
}

.move-left-btn {
   --area: left;
}

.move-right-btn,
.move-left-btn {
   --bg: hsl(120 100% 70%);
   --shadow-color: hsl(120 100% 20%);
}

.pause-btn {
   --area: pause;
   --bg: hsl(240 100% 70%);
   --shadow-color: hsl(240 100% 25%);
}

.start-btn {
   --area: start;
}

.restart-btn {
   --area: restart;
}

.start-btn,
.restart-btn {
   --bg: hsl(60 100% 55%);
   --shadow-color: hsl(60 100% 15%);
}

.slider-container {
   font-size: 1.5rem;
   color: white;
   display: block;
   grid-area: slider;
   display: flex;
   align-items: center;
   gap: 1rem;
   background-color: #222;
   padding: .5rem;
}

.slider-container__icon {
   width: 25px;
   height: 23px;
}

.slider-container__slider {
   display: block;
   width: 100%;
   min-width: 200px;
}

.slider-container__slider::-webkit-slider-runnable-track {
   background-color: #fff;
}

@media (pointer: fine) {
   .btn-container {
      display: none;
   }
}`,""]);const n=s},3645:e=>{e.exports=function(i){var u=[];return u.toString=function(){return this.map(function(e){var t="",s=void 0!==e[5];return e[4]&&(t+="@supports (".concat(e[4],") {")),e[2]&&(t+="@media ".concat(e[2]," {")),s&&(t+="@layer".concat(0<e[5].length?" ".concat(e[5]):""," {")),t+=i(e),s&&(t+="}"),e[2]&&(t+="}"),e[4]&&(t+="}"),t}).join("")},u.i=function(e,t,s,i,n){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(s)for(var r=0;r<this.length;r++){var o=this[r][0];null!=o&&(a[o]=!0)}for(var l=0;l<e.length;l++){var h=[].concat(e[l]);s&&a[h[0]]||(void 0!==n&&(void 0!==h[5]&&(h[1]="@layer".concat(0<h[5].length?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=n),t&&(h[2]&&(h[1]="@media ".concat(h[2]," {").concat(h[1],"}")),h[2]=t),i&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=i):h[4]="".concat(i)),u.push(h))}},u}},8081:e=>{e.exports=function(e){return e[1]}},9322:(e,t,s)=>{s.r(t),s.d(t,{default:()=>h});var t=s(3379),t=s.n(t),i=s(7795),i=s.n(i),n=s(569),n=s.n(n),a=s(3565),a=s.n(a),r=s(9216),r=s.n(r),o=s(4589),o=s.n(o),s=s(4812),l={};l.styleTagTransform=o(),l.setAttributes=a(),l.insert=n().bind(null,"head"),l.domAPI=i(),l.insertStyleElement=r(),t()(s.Z,l);const h=s.Z&&s.Z.locals?s.Z.locals:void 0},3379:e=>{var h=[];function u(e){for(var t=-1,s=0;s<h.length;s++)if(h[s].identifier===e){t=s;break}return t}function o(e,t){for(var s={},i=[],n=0;n<e.length;n++){var a=e[n],r=t.base?a[0]+t.base:a[0],o=s[r]||0,l="".concat(r," ").concat(o),r=(s[r]=o+1,u(l)),o={css:a[1],media:a[2],sourceMap:a[3],supports:a[4],layer:a[5]};-1!==r?(h[r].references++,h[r].updater(o)):(a=function(t,e){var s=e.domAPI(e);return s.update(t),function(e){e?e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer||s.update(t=e):s.remove()}}(o,t),t.byIndex=n,h.splice(n,0,{identifier:l,updater:a,references:1})),i.push(l)}return i}e.exports=function(e,a){var r=o(e=e||[],a=a||{});return function(e){e=e||[];for(var t=0;t<r.length;t++){var s=u(r[t]);h[s].references--}for(var e=o(e,a),i=0;i<r.length;i++){var n=u(r[i]);0===h[n].references&&(h[n].updater(),h.splice(n,1))}r=e}}},569:e=>{var s={};e.exports=function(e,t){if(!(e=function(e){if(void 0===s[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}s[e]=t}return s[e]}(e)))throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");e.appendChild(t)}},9216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,s)=>{e.exports=function(e){var t=s.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{e.exports=function(a){var r;return"undefined"==typeof document?{update:function(){},remove:function(){}}:(r=a.insertStyleElement(a),{update:function(e){var t,s,i,n;t=r,s=a,i="",(e=e).supports&&(i+="@supports (".concat(e.supports,") {")),e.media&&(i+="@media ".concat(e.media," {")),(n=void 0!==e.layer)&&(i+="@layer".concat(0<e.layer.length?" ".concat(e.layer):""," {")),i+=e.css,n&&(i+="}"),e.media&&(i+="}"),e.supports&&(i+="}"),(n=e.sourceMap)&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),s.styleTagTransform(i,t,s.options)},remove:function(){var e;null!==(e=r).parentNode&&e.parentNode.removeChild(e)}})}},4589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},2302:function(e,s,t){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=(Object.defineProperty(s,"__esModule",{value:!0}),s.turnDownVolume=s.turnUpVolume=s.volumeFactor=s.setVolume=s.volume=void 0,i(t(8607))),a=i(t(447)),r=i(t(8184)),o=i(t(5826)),l=i(t(9854)),h=i(t(6123)),u=i(t(1663)),c=i(t(2130)),i=i(t(8582));s.volume=1;const d=new Audio(n.default),p=new Audio(a.default),f=new Audio(r.default),m=new Audio(o.default),v=new Audio(l.default),g=new Audio(h.default),S=new Audio(u.default),y=new Audio(c.default),b=new Audio(i.default),w=[d,p,f,m,v,g,S,y,b];function x(e){e.readyState===HTMLMediaElement.HAVE_ENOUGH_DATA&&(e.currentTime=0,e.play())}function P(e){x(e);const t=()=>{e.currentTime=0,e.play()};return e.addEventListener("ended",t),()=>{e.currentTime=0,e.pause(),e.removeEventListener("ended",t)}}function _(t){s.volume=t,w.forEach(e=>e.volume=t)}s.default={explosion(){x(d)},fastInvader(e){switch(e){case 1:x(p);break;case 2:x(f);break;case 3:x(m);break;case 4:x(v)}},alienKilled(){x(g)},shoot(){x(S)},boss_highpitch(){return P(y)},boss_lowpitch(){return P(b)}},s.setVolume=_,_(s.volume),s.volumeFactor=.05,s.turnUpVolume=function(){_(Math.min(1,s.volume+s.volumeFactor))},s.turnDownVolume=function(){_(Math.max(0,s.volume-s.volumeFactor))}},7738:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.baseYPos=t.stepsToReachPlayer=t.entranceSpeed=t.timeDecreaseFactor=t.stepToEdgeAdjustment=void 0;s=s(9744);t.stepToEdgeAdjustment=1.33,t.timeDecreaseFactor=.96,t.entranceSpeed=30,t.stepsToReachPlayer=11,t.baseYPos=s.LAYOUT.padding.ver+14},3261:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(s(5618)),a=s(453),r=i(s(9663)),o=s(2402),l=s(9744),h=s(7738),u=s(2337),c=i(s(2302)),d=s(7105);class p{constructor(e){if(this.aliensStage=0,this.timeToUpdate=1,this.direction=1,this.entering=!0,this.timeStepSum=0,!a.alienTypesRegExp.test(e))throw new Error(`Invalid character(s) in plan ${e}. Consider using only valid characters (${a.alienTypes.join(",")})`);p.instancesCreated++;var e=e.trim().split("\n").map(e=>[...e]),t=(this.numColumns=e[0].length,this.numRows=e.length,this.alive=this.numColumns*this.numRows,this.numColumns*l.DIMENSIONS.alien.w+(this.numColumns-1)*l.DIMENSIONS.alienSetGap.w),s=this.numRows*l.DIMENSIONS.alien.h+(this.numRows-1)*l.DIMENSIONS.alienSetGap.h;this.size={w:t,h:s},this.pos=new n.default(50-t/2,1.5*-s),this.xStep=(100-2*l.LAYOUT.padding.hor-t)/15,this.yStep=(l.LAYOUT.playerYPos-(h.baseYPos+this.size.h))/h.stepsToReachPlayer+.01,this.initialYPos=h.baseYPos+(p.instancesCreated-1)%9*this.yStep,this.aliens=e.map((e,s)=>e.map((e,t)=>r.default.create(e,{x:t,y:s})))}update(e){if(this.entering){if(this.pos=this.pos.plus(new n.default(0,h.entranceSpeed*e)),!(this.pos.y>=this.initialYPos))return;this.entering=!1,this.pos.y=this.initialYPos}this.timeStepSum+=e;var t,s=this.moveVertically(),i=this.moveHorizontally(s);this.timeStepSum>=this.timeToUpdate&&(this.timeStepSum=0),0===s&&0===i||(c.default.fastInvader(Math.ceil((0,d.randomNum)(0,4))),this.removeDeadAliens(),this.aliensStage=1===this.aliensStage?0:1),this.pos=this.pos.plus(new n.default(i,s));for({alien:t}of this)t instanceof r.default&&t.gun.update(e)}moveVertically(){let e=0;return this.pos.x+this.size.w>=100-l.LAYOUT.padding.hor&&this.timeStepSum>=this.timeToUpdate&&this.direction===o.HorizontalDirection.Right?(e=this.yStep,this.direction=o.HorizontalDirection.Left):this.pos.x<=l.LAYOUT.padding.hor&&this.timeStepSum>=this.timeToUpdate&&this.direction===o.HorizontalDirection.Left&&(e=this.yStep,this.direction=o.HorizontalDirection.Right),e}moveHorizontally(e){let t=0;return this.timeStepSum>=this.timeToUpdate&&0===e&&(t=this.direction===o.HorizontalDirection.Right?(e=100-this.pos.x-l.LAYOUT.padding.hor-this.size.w)<this.xStep*h.stepToEdgeAdjustment?e:this.xStep:(e=this.pos.x-l.LAYOUT.padding.hor)<this.xStep*h.stepToEdgeAdjustment?e:this.xStep,t*=this.direction),t}adapt(){(0,u.adaptPos)(this),(0,u.adaptSize)(this),(0,u.removeDeadRowsAndColumns)(this)}getAlienPos({x:e,y:t}){return new n.default(this.pos.x+e*l.DIMENSIONS.alien.w+e*l.DIMENSIONS.alienSetGap.w,this.pos.y+t*l.DIMENSIONS.alien.h+t*l.DIMENSIONS.alienSetGap.h)}removeAlien(e){this.aliens[e.gridPos.y][e.gridPos.x]="exploding",this.alive--,this.timeToUpdate*=h.timeDecreaseFactor,c.default.alienKilled()}removeDeadAliens(){for(var{alien:e,row:t,column:s}of this)"exploding"===e&&(this.aliens[t][s]=null)}*[Symbol.iterator](){for(let t=0;t<this.numRows;t++)for(let e=0;e<this.numColumns;e++)yield{alien:this.aliens[t][e],column:e,row:t}}}p.instancesCreated=0,t.default=p},2337:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isAlien=t.adaptPos=t.adaptSize=t.syncNumOfColsAndRows=t.syncAliensGridPos=t.removeDeadRowsAndColumns=t.getFirstOrLastRowIfDead=t.getFirstOrLastColumnIfDead=t.isRowDead=t.isColumnDead=void 0;const h=s(9744);function i(e,t){return e.every(e=>null===e[t]||"exploding"===e[t])}function n(e){return e.every(e=>null===e||"exploding"===e)}function a(e){var t=i(e,0),s=i(e,e[0].length-1);return t?0:s?e[0].length-1:null}function r(e){var t=n(e[0]),s=n(e[e.length-1]);return t?0:s?e.length-1:null}function o(e){e.aliens.forEach((e,s)=>{e.forEach((e,t)=>{null!==e&&"exploding"!==e&&(e.gridPos={x:t,y:s})})})}function l(e){e.numRows=e.aliens.length,e.numColumns=0===e.numRows?0:e.aliens[0].length}function u(e){return null!==e&&"exploding"!==e}t.isColumnDead=i,t.isRowDead=n,t.getFirstOrLastColumnIfDead=a,t.getFirstOrLastRowIfDead=r,t.removeDeadRowsAndColumns=function(e){let s;for(;null!==(s=a(e.aliens));)e.aliens=e.aliens.map(e=>e.filter((e,t)=>t!==s)),o(e);let i;for(;0!==e.aliens.length&&null!==(i=r(e.aliens));)e.aliens=e.aliens.filter((e,t)=>t!==i),o(e);l(e)},t.syncAliensGridPos=o,t.syncNumOfColsAndRows=l,t.adaptSize=function(e){let t=null,s=null,i=null,n=null;for(var{alien:a}of e){var r;"exploding"!==a&&null!==a&&({x:a,y:r}=a.gridPos,null===t&&(t=r),s=r,(null===i||a<i)&&(i=a),null===n||a>n)&&(n=a)}var o,l;null!==t&&(o=(s-t+1)*h.DIMENSIONS.alien.h+(s-t)*h.DIMENSIONS.alienSetGap.h,l=(n-i+1)*h.DIMENSIONS.alien.w+(n-i)*h.DIMENSIONS.alienSetGap.w,e.size={w:l,h:o})},t.adaptPos=function(e){let t=null,s=null;for(var{alien:i}of e){var n;u(i)&&({x:i,y:n}=i.gridPos,(null===t||i<t)&&(t=i),null===s)&&(s=n)}null!==t&&null!==s&&(e.pos=e.getAlienPos({x:t,y:s}))},t.isAlien=u},453:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.alienTypesConfig=t.alienTypesRegExp=t.alienTypes=void 0,t.alienTypes=["X","Y","Z"],t.alienTypesRegExp=new RegExp(`(\\w*(${t.alienTypes.join("|")})*\\w*)+`),t.alienTypesConfig={X:{score:10,gunConfig:[40,{w:.5,h:3},2e4]},Y:{score:20,gunConfig:[60,{w:1,h:3},3e4]},Z:{score:30,gunConfig:[80,{w:1.5,h:3},4e4,!0]}}},9663:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(9744),a=i(s(5618)),r=s(453),o=i(s(7532));t.default=class l{constructor(e,t,s,i){this.gridPos=e,this.score=t,this.gun=s,this.alienType=i,this.actorType="alien"}fire(e){var t=e.x+n.DIMENSIONS.alien.w/2-this.gun.bulletSize.w/2;return this.gun.fire(new a.default(t,e.y),"down")}static create(e,t){var s,i;return"."===e?null:({score:s,gunConfig:i}=r.alienTypesConfig[e],new l(t,s,new o.default("alien",...i),e))}}},8112:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.baseAppearanceInterval=t.speedX=t.bossExplodingTime=void 0,t.bossExplodingTime=1,t.speedX=13,t.baseAppearanceInterval=25},5441:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(s(5618)),a=s(9744),r=s(2402),o=s(8112),l=i(s(2302));t.default=class{constructor(e){this.timeSinceDeath=0,this.status="alive",this.direction=.5<Math.random()?r.HorizontalDirection.Right:r.HorizontalDirection.Left,this.numOfPlayerFires=e.numOfPlayerFires,this.direction===r.HorizontalDirection.Left?this.pos=new n.default(100,a.LAYOUT.bossYPos):this.pos=new n.default(-a.DIMENSIONS.boss.w,a.LAYOUT.bossYPos),this.stopPitch=this.startPitch()}startPitch(){return l.default.boss_lowpitch()}get score(){var e;return 23===this.numOfPlayerFires||(this.numOfPlayerFires-23)%15==0?300:(e=this.numOfPlayerFires<23?23:15,e=this.numOfPlayerFires%e/e,10*Math.round(200*e/10))}update(e,t){e.numOfPlayerFires!==this.numOfPlayerFires&&(this.numOfPlayerFires=e.numOfPlayerFires),"exploding"===this.status?(this.timeSinceDeath+=t,this.timeSinceDeath>=o.bossExplodingTime&&(this.status="dead")):this.pos=this.pos.plus(new n.default(this.direction*o.speedX*t,0))}isOutOfBounds(){return this.direction===r.HorizontalDirection.Right?100<=this.pos.x:this.pos.x<=-a.DIMENSIONS.boss.w}}},6853:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=s(9744);t.default=class{constructor(e,t,s,i,n=!1){this.from=e,this.pos=t,this.speed=s,this.size=i,this.wiggly=n}update(e){this.pos=this.pos.plus(this.speed.times(e))}isOutOfBounds(){return 100<this.pos.x||this.pos.x<-this.size.w||this.pos.y+this.size.h>=i.LAYOUT.floorYPos||this.pos.y<-this.size.h}}},3270:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(s(9663)),a=s(9744),r=i(s(9932));t.default=class{constructor(e,t,s){this.alienSet=e,this.player=t,this.walls=s}alienSetTouchesPlayer(){return this.alienSet.pos.y+this.alienSet.size.h>=this.player.pos.y}bulletTouchesObject(e,t,s){return(0,r.default)(e.pos,e.size,t,s)}handleAlienSetContactWithWall(){for(const t of this.walls)for(var{alien:e}of this.alienSet)e instanceof n.default&&(e=this.alienSet.getAlienPos(e.gridPos),t.collide(e,a.DIMENSIONS.alien));return!1}bulletTouchesOtherBullet(e,t){return this.bulletTouchesObject(e,t.pos,t.size)}}},6189:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t,s){this.size=e,this.pos=t,this.duration=s,this.timeSinceBeginning=0}update(e){this.timeSinceBeginning+=e}}},7532:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(s(5618)),a=i(s(6853)),r=s(7105);t.default=class{constructor(e,t,s,i,n=!1){this.owner=e,this.bulletSpeed=t,this.bulletSize=s,this.baseFireInterval=i,this.isBulletWiggly=n,this.timeSinceLastShot=0,this.fireInterval=0===this.baseFireInterval?0:(0,r.randomNumberInFactorRange)(i,.2),this.timeSinceLastShot=0===this.baseFireInterval?0:(0,r.randomNum)(0,this.fireInterval)}fire(e,t){e=new a.default(this.owner,e,new n.default(0,"up"===t?-this.bulletSpeed:this.bulletSpeed),this.bulletSize,this.isBulletWiggly);return 0===this.baseFireInterval?e:this.canFire()?(this.timeSinceLastShot=0,this.fireInterval=(0,r.randomNumberInFactorRange)(this.baseFireInterval,.2),e):null}update(e){0!==this.baseFireInterval&&(this.timeSinceLastShot+=1e3*e)}canFire(){return 0===this.baseFireInterval||this.timeSinceLastShot>=this.fireInterval}}},6722:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(s(6888));class a{constructor(e,t="#"){e=(0,n.default)(e,t);this.pieces=e,this.numOfColumns=e[0].length,this.numOfRows=e.length}breakPiece(e,t){this.pieces[t][e]=!1}*[Symbol.iterator](){var e=this.pieces.length;for(let t=0;t<e;t++){var s=this.pieces[t].length;for(let e=0;e<s;e++){var i=this.pieces[t][e];yield{row:t,column:e,piece:i}}}}}t.default=a},6947:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.revivingTime=t.explodingTime=t.xSpeed=void 0,t.xSpeed=30,t.explodingTime=1,t.revivingTime=1.5},7347:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(s(7532)),a=i(s(5618)),r=s(9744),o=s(6947),l=i(s(2302));t.default=class{constructor(e){this.bestScore=e,this.actorType="player",this.baseXPos=50-r.DIMENSIONS.player.w/2,this.pos=new a.default(this.baseXPos,r.LAYOUT.playerYPos),this.gun=new n.default("player",75,{w:.5,h:3},0),this.lives=3,this.score=0,this.status="alive",this.timeSinceExplosion=0,this.timeSinceResurrection=0}fire(){var e=this.pos.x+r.DIMENSIONS.player.w/2-this.gun.bulletSize.w/2;return l.default.shoot(),this.gun.fire(new a.default(e,this.pos.y),"up")}resetPos(){this.pos=new a.default(this.baseXPos,r.LAYOUT.playerYPos)}update(e,t,s){var i=new a.default(t*o.xSpeed,0);this.handleStatus(t),"exploding"!==this.status&&(s.moveLeft&&this.pos.x>r.LAYOUT.padding.hor?this.pos=this.pos.minus(i):s.moveRight&&this.pos.x+r.DIMENSIONS.player.w<100-r.LAYOUT.padding.hor&&(this.pos=this.pos.plus(i)),!s.fire||e.isPlayerBulletPresent||e.alienSet.entering||(e.bullets.push(this.fire()),e.isPlayerBulletPresent=!0,e.numOfPlayerFires++))}handleStatus(e){"exploding"===this.status&&(this.timeSinceExplosion+=e),"reviving"===this.status&&(this.timeSinceResurrection+=e),this.timeSinceExplosion>=o.explodingTime&&(this.status="reviving",this.timeSinceExplosion=0,this.resetPos()),this.timeSinceResurrection>=o.revivingTime&&(this.status="alive",this.timeSinceResurrection=0)}}},5251:function(e,t,s){var i=this&&this.__createBinding||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var n=Object.getOwnPropertyDescriptor(t,s);n&&("get"in n?t.__esModule:!n.writable&&!n.configurable)||(n={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,n)}:function(e,t,s,i){e[i=void 0===i?s:i]=t[s]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&i(t,e,s);return n(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(s(3795)),l=s(3466),h=s(9744),u=a(s(2302));t.default=class{constructor(e,t,s){this.State=e,this.status="start",this.bestScore=this.getBestScore(),this.state=e.start(o.default,this.bestScore),this.view=new t(this.state,{onPauseGame:this.handlePause.bind(this),onStartGame:this.handleStartGame.bind(this),onRestartGame:this.handleRestartGame.bind(this),onChangeVolume:e=>{this.view.syncState(this.state,1/60),u.setVolume(e)}},s),this.view.syncState(this.state,0),this.view.keyDownHandlers.set(h.ACTION_KEYS.turnDownVolume,()=>{u.turnDownVolume(),"paused"===this.state.status&&this.view.syncState(this.state,1/60)}),this.view.keyDownHandlers.set(h.ACTION_KEYS.turnUpVolume,()=>{u.turnUpVolume(),"paused"===this.state.status&&this.view.syncState(this.state,1/60)}),this.runGame()}getBestScore(){var e=localStorage.getItem("bestScore");return null===e?0:Number(e)}setBestScore(e){localStorage.setItem("bestScore",e.toString()),this.bestScore=e}handlePause(){var e;"running"!==this.state.status&&"paused"!==this.state.status||("paused"===this.state.status?(this.state.status="running",this.status="running",null!=(e=this.state.boss)&&e.startPitch(),this.runGame()):(null!=(e=this.state.boss)&&e.stopPitch(),this.state.status="paused",this.status="paused"))}handleStartGame(){"start"===this.state.status&&(this.state.status="running")}handleRestartGame(){"lost"===this.state.status&&(this.state=this.State.start(o.default,this.bestScore),this.state.status="running")}runGame(){(0,l.runAnimation)(e=>this.frame(e))}frame(e){return this.state.update(e,this.view.actions),this.state.status!==this.status&&(this.view.cleanUpFor(this.state.status),this.status=this.state.status,"lost"===this.status)&&this.bestScore<this.state.player.bestScore&&this.setBestScore(this.state.player.score),this.view.syncState(this.state,e),"paused"!==this.state.status}}},3466:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.runAnimation=void 0,t.runAnimation=function(n){let a=null;requestAnimationFrame(function e(t){let s;var i;(s=a?(i=Math.min(t-a,100)/1e3,a=t,n(i)):(a=t,!0))&&requestAnimationFrame(e)})}},9914:function(e,t,s){var i=this&&this.__createBinding||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var n=Object.getOwnPropertyDescriptor(t,s);n&&("get"in n?t.__esModule:!n.writable&&!n.configurable)||(n={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,n)}:function(e,t,s,i){e[i=void 0===i?s:i]=t[s]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&i(t,e,s);return n(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(s(5441)),l=r(s(5311)),h=r(s(7347)),u=r(s(6189)),c=s(9744),d=s(7105),p=r(s(3261)),f=r(s(9663)),m=r(s(3270)),v=r(s(3083)),g=a(s(8112)),S=a(s(2302)),y=r(s(3795));function b(){return(0,d.randomNumberInFactorRange)(g.baseAppearanceInterval,.1)}t.default=class w{constructor(e,t,s){this.alienSet=e,this.player=t,this.env=s,this.bullets=[],this.status="start",this.boss=null,this.bossesKilled=0,this.aliensKilled=0,this.isPlayerBulletPresent=!1,this.bulletCollisions=[],this.lastScore={value:null,id:null},this.numOfPlayerFires=0,this.timeSinceBossLastAppearance=0,this.bossAppearanceInterval=b()}update(e,t){"running"!==this.status||(this.handleCollisions(e),this.player.update(this,e,t),"exploding"===this.player.status)||(this.alienSet.update(e),this.alienSet.entering)||(this.fireAliens(),this.handleBullets(e),this.handleBoss(e),this.env.handleAlienSetContactWithWall(),0===this.alienSet.alive?(this.alienSet=new p.default(y.default),this.bullets=[],this.isPlayerBulletPresent=!1,this.env.alienSet=this.alienSet,this.player.lives++,this.numOfPlayerFires=0,null!==this.boss&&(this.boss.stopPitch(),this.boss=null)):(this.player.lives<1||this.env.alienSetTouchesPlayer())&&(this.status="lost",null!=(t=this.boss)&&t.stopPitch(),{bestScore:e,score:t}=this.player,this.player.bestScore=e<t?t:e,p.default.instancesCreated=0))}handleBullets(t){this.bullets.forEach(e=>e.update(t));let e=[],s=!1,i=!1;for(const r of this.bullets)if(r.isOutOfBounds())"player"===r.from&&(this.isPlayerBulletPresent=!1);else{if("alien"===r.from){if(this.handleBulletContactWithPlayer(r))continue}else if("player"===r.from){if(i){this.isPlayerBulletPresent=!1;continue}var n=this.handleBulletContactWithAlien(r);if(s=s||n,n){this.isPlayerBulletPresent=!1;continue}if(this.handleBulletContactWithBoss(r)){this.isPlayerBulletPresent=!1;continue}}if(this.handleBulletContactWithWalls(r))"player"===r.from&&(this.isPlayerBulletPresent=!1);else{if("alien"===r.from&&(n=this.bullets.find(e=>"player"===e.from))&&this.env.bulletTouchesOtherBullet(r,n)){this.bulletCollisions.push(new u.default(c.DIMENSIONS.bulletCollision,{y:n.pos.y,x:n.pos.x+this.player.gun.bulletSize.w/2},.3)),i=!0;var a=r.wiggly?.9:.3;if(Math.random()>a)continue}e.push(r)}}this.isPlayerBulletPresent&&i&&(e=e.filter(e=>"player"!==e.from),this.isPlayerBulletPresent=!1),s&&this.alienSet.adapt(),this.bullets=e}handleBulletContactWithPlayer(e){return!("alive"!==this.player.status||!this.env.bulletTouchesObject(e,this.player.pos,c.DIMENSIONS.player)||(this.player.lives--,this.player.status="exploding",S.default.explosion(),0))}handleBulletContactWithAlien(e){for(var{alien:t}of this.alienSet)if(t instanceof f.default){var s=this.alienSet.getAlienPos(t.gridPos);if(this.env.bulletTouchesObject(e,s,c.DIMENSIONS.alien))return this.lastScore.value=t.score,null!==this.lastScore.id?this.lastScore.id++:this.lastScore.id=0,this.player.score+=t.score,this.aliensKilled++,this.alienSet.removeAlien(t),!0}return!1}handleBulletContactWithWalls(e){let t=!1;for(const s of this.env.walls)if(t=s.collide(e.pos,e.size))break;return t}handleBulletContactWithBoss(e){return null!==this.boss&&"alive"===this.boss.status&&(this.env.bulletTouchesObject(e,this.boss.pos,c.DIMENSIONS.boss)?(this.lastScore.value=this.boss.score,null!==this.lastScore.id?this.lastScore.id++:this.lastScore.id=0,this.player.score+=this.boss.score,this.boss.status="exploding",this.boss.stopPitch(),this.bossesKilled++,this.bossAppearanceInterval=b(),S.default.alienKilled(),!0):void 0)}fireAliens(){var e,t,s=[];for({alien:e}of this.alienSet)e instanceof f.default&&e.gun.canFire()&&(t=this.alienSet.getAlienPos(e.gridPos),t=e.fire(t),s.push(t));this.bullets.push(...s)}handleBoss(e){null!==this.boss?this.boss.update(this,e):this.timeSinceBossLastAppearance+=e,this.timeSinceBossLastAppearance>=this.bossAppearanceInterval&&(this.boss=new o.default(this),this.timeSinceBossLastAppearance=0,this.bossAppearanceInterval=b()),this.boss&&(this.boss.isOutOfBounds()||"dead"===this.boss.status)&&(this.boss.stopPitch(),this.boss=null)}handleCollisions(t){this.bulletCollisions.forEach(e=>e.update(t)),this.bulletCollisions=this.bulletCollisions.filter(e=>e.timeSinceBeginning<e.duration)}static start(e,t){e=new p.default(e),t=new h.default(t);const s=(100-c.LAYOUT.wallsSize.w*c.LAYOUT.numWalls)/5;var i=new Array(c.LAYOUT.numWalls).fill(void 0).map((e,t)=>new l.default({x:(t+1)*s+c.LAYOUT.wallsSize.w*t,y:c.LAYOUT.wallYPos},c.LAYOUT.wallsSize,v.default)),i=new m.default(e,t,i);return new w(e,t,i)}get volume(){return S.volume}}},5886:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.colors=t.GAME_DISPLAY=t.GAMEOVER_SCREEN_LAYOUT=t.INITIAL_SCREEN_LAYOUT=void 0;s=s(9744);t.INITIAL_SCREEN_LAYOUT={titlePos:{x:5,y:8},soundHintPos:{x:5,y:s.LAYOUT.padding.ver},controlsGuidePos:{x:5,y:45},scoresPos:{x:73,y:10},twinkleMessagePos:{x:65,y:80},authorAttributionPos:{x:100-s.LAYOUT.padding.hor,y:100-s.LAYOUT.padding.ver}},t.GAMEOVER_SCREEN_LAYOUT={titleYPos:16,pressMessageYPos:80,soundHintPos:{x:s.LAYOUT.padding.hor,y:s.LAYOUT.padding.ver}},t.GAME_DISPLAY={maxWidth:1024,aspectRatio:4/3},t.colors={boss:"#ff4242"}},6666:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(2302),a=s(9843),r=i(s(6512));t.default=class{constructor(e,t){this.input=(0,a.elt)("input",{oninput:e=>{t(Number(e.target.value))},value:e.toString(),type:"range",className:"slider-container__slider",min:"0",max:"1",step:n.volumeFactor.toString(),id:"volume-slider"});e=Math.round(100*e)+"%";this.inputValue=(0,a.elt)("div",null,e),this.container=(0,a.elt)("label",{className:"slider-container",htmlFor:"volume-slider"},(0,a.elt)("span",{className:"sr-only"},"volume"),(0,a.elt)("img",{className:"slider-container__icon",src:r.default,alt:""}),this.input,this.inputValue)}update(e){this.input.value=e.toString();e=Math.round(100*e)+"%";this.inputValue.textContent=e}}},5438:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=(Object.defineProperty(t,"__esModule",{value:!0}),t.squareKeysSprite=t.soundIcon=t.spaceKeyImage=t.wigglyBulletImage=t.bossImage=t.playerSpaceship=t.aliensSprite=void 0,i(s(2750))),a=i(s(2584)),r=i(s(4873)),o=i(s(9908)),l=i(s(144)),h=i(s(6512)),i=i(s(4462)),s=new Image(600,100),s=((t.aliensSprite=s).src=n.default,new Image(100,100)),n=((t.playerSpaceship=s).src=a.default,new Image(100,100)),s=((t.bossImage=n).src=r.default,new Image(100,100)),a=((t.wigglyBulletImage=s).src=o.default,new Image(600,100)),n=((t.squareKeysSprite=a).src=i.default,new Image(600,100)),r=((t.spaceKeyImage=n).src=l.default,new Image(25,23));(t.soundIcon=r).src=h.default},2338:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(9843),a=s(5886),r=i(s(6660)),o=i(s(8743)),l=i(s(5506));s(9322);t.default=class{constructor(e,t,s){this.state=e,this.handlers=t,this.actions={},this.keyDownHandlers=new Map,this.canvas=document.createElement("canvas"),this.canvas.style.display="block",this.canvas.style.marginInline="auto",s.appendChild(this.canvas),this.currentScreen=new r.default(this.canvas,e,t.onStartGame,t.onChangeVolume),this.defineEventListeners(),this.adaptDisplaySize(),this.syncState(e,0)}adaptDisplaySize(){let e=Math.min(a.GAME_DISPLAY.maxWidth,(0,n.getElementInnerDimensions)(this.canvas.parentNode).w),t=e/a.GAME_DISPLAY.aspectRatio;t>innerHeight&&(t=innerHeight,e=t*a.GAME_DISPLAY.aspectRatio),this.canvas.setAttribute("width",e.toString()),this.canvas.setAttribute("height",t.toString()),this.syncState(this.state,1/60)}cleanUpFor(e){switch(e){case"start":break;case"running":this.currentScreen.cleanUp(),this.currentScreen=new l.default(this.canvas,this.state,this.syncAction.bind(this),this.handlers.onPauseGame,this.handlers.onChangeVolume);break;case"lost":this.currentScreen.cleanUp(),this.currentScreen=new o.default(this.canvas,this.state,this.handlers.onRestartGame,this.handlers.onChangeVolume)}}syncState(e,t){"lost"===(this.state=e).status&&Object.keys(this.actions).forEach(e=>this.actions[e]=!1),this.currentScreen.syncState(e,t)}defineEventListeners(){window.addEventListener("resize",()=>this.adaptDisplaySize()),window.addEventListener("keydown",e=>{var t=e["key"];this.keyDownHandlers.has(t)&&this.keyDownHandlers.get(t)(e)})}syncAction(e,t){this.actions[e]=t}}},8783:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fontSizes=t.colors=void 0;const a=s(5438);t.colors={X:"limegreen",Y:"orange",Z:"pink",boss:"#f77"},t.fontSizes={sm:2.5,md:4,lg:6,xl:12};t.default=class{constructor(e){this.canvas=e,this.unregisterFunctions=[],this.fontFamily="'VT323', monospace",this.ctx=e.getContext("2d"),this.ctx.imageSmoothingEnabled=!1}get canvasWidth(){return this.canvas.width}get canvasHeight(){return this.canvas.height}horPixels(e){return e/100*this.canvasWidth}verPixels(e){return e/100*this.canvasHeight}getPixelPos(e){return{x:this.horPixels(e.x),y:this.verPixels(e.y)}}getPixelSize(e){return{w:this.horPixels(e.w),h:this.verPixels(e.h)}}getFontSize(e){return this.horPixels(t.fontSizes[e])}setFontSize(e){this.ctx.font=this.getFontSize(e)+"px "+this.fontFamily}clearScreen(){this.ctx.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.ctx.fillStyle="#000",this.drawBackground()}drawBackground(){var e=this["ctx"],t=(e.save(),this.horPixels(1)),s=t/2,i=t/2,i=this.ctx.createRadialGradient(i,i,s/3,i,i,s);i.addColorStop(0,"#222"),i.addColorStop(.8,"#000"),e.scale(this.canvasWidth/t,this.canvasHeight/t),e.fillStyle=i,e.fillRect(0,0,t,t),e.restore()}cleanUp(){this.mobileButtons.textContent="",this.mobileButtons.remove(),this.unregisterFunctions.forEach(e=>e()),this.unregisterFunctions=[]}drawPieces(e,t,s="#fff"){this.ctx.fillStyle=s;var i,n,a,{w:r,h:o}=t;for({piece:i,row:n,column:a}of e)i&&this.ctx.fillRect(a*r,n*o,r,o)}drawVolumeHint(e,t){var{x:t,y:s}=this.getPixelPos(t),i=this["ctx"],t=(i.save(),this.setFontSize("sm"),i.textAlign="start",i.textBaseline="top",i.translate(t,s),this.horPixels(3)),s="| "+Math.round(100*e),e=i.measureText(s)["fontBoundingBoxDescent"],n=this.horPixels(1);i.drawImage(a.soundIcon,0,0,t,e),i.translate(t+n,0),i.fillText(s,0,0),i.restore()}}},8743:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(9843);var a=i(s(8783));const r=s(5886),o=s(9744),l=i(s(6666));class h extends a.default{constructor(e,t,s,i){super(e),this.state=t,this.onRestartGame=s,this.onChangeVolume=i,this.mobileButtons=(0,n.elt)("div",{className:"btn-container btn-container--state-lost"}),this.setUpControlMethods()}handleKeydown(e){e.key===o.ACTION_KEYS.restartGame&&(e.preventDefault(),this.onRestartGame())}setUpControlMethods(){document.body.appendChild(this.mobileButtons);const e=e=>this.handleKeydown(e);window.addEventListener("keydown",e),this.unregisterFunctions.push(()=>{window.removeEventListener("keydown",e)}),this.createMobileControls()}createMobileControls(){var e=(0,n.elt)("button",{className:"restart-btn btn-container__btn",onclick:this.onRestartGame},"restart"),t=new l.default(this.state.volume,this.onChangeVolume);this.mobileVolumeSlider=t,this.mobileButtons.appendChild(e),this.mobileButtons.appendChild(t.container)}syncState(e){this.clearScreen(),this.drawTitle(),this.drawStateData(e);var t=this.getPixelPos({y:r.GAMEOVER_SCREEN_LAYOUT.pressMessageYPos,x:50});(0,n.drawTwinkleMessage)(this.ctx,"Press space to play again",t,{fontSize:this.getFontSize("md"),fontFamily:this.fontFamily}),this.drawVolumeHint(e.volume,r.GAMEOVER_SCREEN_LAYOUT.soundHintPos),this.mobileVolumeSlider.update(e.volume)}drawTitle(){var e=this.horPixels(50),t=this.verPixels(11);this.setFontSize("xl"),this.ctx.fillStyle="#f77",this.ctx.textAlign="center",this.ctx.textBaseline="top",this.ctx.fillText("GAME",e,t),this.ctx.fillText("OVER",e,t+this.verPixels(11))}drawStateData(e){var{bossesKilled:e,aliensKilled:t,player:{score:s,bestScore:i}}=e,n=(this.setFontSize("md"),this.ctx.fillStyle="#fff",1===t?"alien":"aliens");this.ctx.fillText(`You killed ${t} ${n} and ${e} `+(1===e?"boss":"bosses"),this.horPixels(50),this.verPixels(45)),this.ctx.fillText("Your score is "+s,this.horPixels(50),this.verPixels(52)),this.ctx.fillText("Your best score is "+i,this.horPixels(50),this.verPixels(59))}}t.default=h},6660:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(9744);var a=s(5886);const r=s(9843);var o=i(s(8783));const l=s(453),h=i(s(6666)),{scoresPos:c,soundHintPos:u,titlePos:d,controlsGuidePos:p,twinkleMessagePos:f,authorAttributionPos:m}=a.INITIAL_SCREEN_LAYOUT,v=s(5438),g=Object.keys(l.alienTypesConfig).map((e,t)=>({image:v.aliensSprite,score:l.alienTypesConfig[e].score,iconSize:{w:3.5,h:5},tiles:[200*t,0],imageSize:[100,100]})),S=(g.push({score:null,iconSize:{w:10,h:6.5},image:v.bossImage,tiles:[0,0],imageSize:[v.bossImage.naturalWidth,v.bossImage.naturalHeight]}),{left:0,right:150,up:300,down:450,esc:600}),y=[5,6.5],b=[26,6.5];class w extends o.default{constructor(e,t,s,i){super(e),this.state=t,this.onStartGame=s,this.onChangeVolume=i,this.mobileButtons=(0,r.elt)("div",{className:"btn-container btn-container--state-start"}),this.setUpControlMethods()}handleKeydown(e){n.ACTION_KEYS.startGame===e.key&&(e.preventDefault(),this.onStartGame())}setUpControlMethods(){document.body.appendChild(this.mobileButtons);const e=e=>this.handleKeydown(e);window.addEventListener("keydown",e),this.unregisterFunctions.push(()=>{window.removeEventListener("keydown",e)}),this.createMobileControls()}createMobileControls(){var e=(0,r.elt)("button",{className:"start-btn btn-container__btn",onclick:this.onStartGame},"start"),t=new h.default(this.state.volume,this.onChangeVolume);this.mobileVolumeSlider=t,this.mobileButtons.appendChild(e),this.mobileButtons.append(t.container)}syncState(e){this.clearScreen(),this.drawTitle(),this.drawBestScore(e.player.bestScore),this.drawScores();var t=this.getPixelPos(f);(0,r.drawTwinkleMessage)(this.ctx,"Press space to start",t,{fontSize:this.getFontSize("md"),fontFamily:this.fontFamily,align:"start"}),this.drawControlsGuide(),this.drawAuthorAttribution(),this.drawVolumeHint(e.volume,u),this.mobileVolumeSlider.update(e.volume)}drawTitle(){this.setFontSize("xl");var e=this["ctx"],{x:t,y:s}=this.getPixelPos(d),i=(e.fillStyle="white",e.textAlign="start",e.textBaseline="hanging",e.fillText("SPACE",t,s),e.measureText("SPACE")),i=i["actualBoundingBoxDescent"];e.fillText("INVADERS",t,s+i+this.verPixels(1))}drawBestScore(e){var t;0!==e&&(t=this["ctx"],this.setFontSize("md"),t.fillStyle="#fff",t.textAlign="start",t.textBaseline="top",t.fillText("Your Best Score is "+e,this.horPixels(5),this.verPixels(34)))}drawControlsGuide(){this.setFontSize("lg");var e=this["ctx"],{x:t,y:s}=(e.textAlign="start",e.textBaseline="hanging",e.save(),this.getPixelPos(p)),t=(e.translate(t,s),e.fillText("CONTROLS",0,0),e.measureText("CONTROLS")),[s,t]=(e.translate(0,this.verPixels(4)+t.actualBoundingBoxDescent),this.setFontSize("md"),y),s=this.horPixels(s),t=this.verPixels(t),i=this.horPixels(1),n=this.verPixels(2),{left:a,right:r,up:o,down:l}=S,h={w:s,h:t},a=this.drawSpriteSequence(v.squareKeysSprite,150,h,i,[a,r]),[r,a]=(e.textBaseline="middle",e.save(),e.translate(a+i,t/2),e.fillText("-> MOVEMENT",0,0),e.restore(),e.translate(0,t+n),b),r=this.horPixels(r),a=this.verPixels(a),r=(e.drawImage(v.spaceKeyImage,0,0,r,a),e.save(),e.translate(r+i,a/2),e.fillText("-> FIRE",0,0),e.restore(),e.translate(0,a+n),this.drawSpriteSequence(v.squareKeysSprite,150,h,i,[o,l]));e.save(),e.translate(r+i,t/2),e.fillText("-> SOUND",0,0),e.restore(),e.translate(0,t+n),e.drawImage(v.squareKeysSprite,S.esc,0,150,150,0,0,s,t),e.translate(s+i,t/2),e.fillText("-> PAUSE/UNPAUSE",0,0),e.restore()}drawSpriteSequence(t,s,i,n,e){const a=this["ctx"];let r=0;return a.save(),e.forEach(e=>{a.drawImage(t,e,0,s,s,0,0,i.w,i.h),r+=i.w+n,a.translate(i.w+n,0)}),a.restore(),r}drawScores(){const o=c.y,l=this.horPixels(c.x),h=this.horPixels(1.5),u=this["ctx"];this.setFontSize("md"),u.fillStyle="#fff",u.textBaseline="middle",u.textAlign="start",g.forEach(({iconSize:e,score:t,image:s,tiles:i,imageSize:n},a)=>{var{w:e,h:r}=this.getPixelSize(e),a=this.verPixels(o+7*a),a=(u.save(),u.translate(l,a),u.save(),u.translate(-e,0),u.drawImage(s,i[0],i[1],n[0],n[1],0,0,e,r),u.restore(),u.translate(h,r/2),u.fillText("=",0,0),u.measureText("="));u.translate(h+a.width,0),u.fillText(null===t?"????":t+" points",0,0),u.restore()})}drawAuthorAttribution(){var e=this.getPixelPos(m),t=this["ctx"];this.setFontSize("sm"),t.textAlign="end",t.textBaseline="bottom",t.fillText("Coded by Rafael Maia",e.x,e.y)}}t.default=w},5506:function(e,t,s){var i=this&&this.__createBinding||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var n=Object.getOwnPropertyDescriptor(t,s);n&&("get"in n?t.__esModule:!n.writable&&!n.configurable)||(n={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,n)}:function(e,t,s,i){e[i=void 0===i?s:i]=t[s]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&i(t,e,s);return n(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(9744);var l=r(s(8783));const h=s(5886);var u=r(s(6140)),c=r(s(6722));const d=a(s(6947)),p=s(9843),f=s(5438),m=r(s(6666)),v={X:[0,100],Y:[200,300],Z:[400,500]},g={w:100,h:100},S=new c.default(u.default);class y extends l.default{constructor(e,t,s,i,n){super(e),this.state=t,this.syncAction=s,this.onPauseGame=i,this.onChangeVolume=n,this.lastScore={value:null,id:null},this.timeSinceLastScoreChange=0,this.mobileButtons=(0,p.elt)("div",{className:"btn-container btn-container--state-running"}),this.pauseBtn=null,this.trackedTouchIds=[],this.setUpControlMethods()}setUpControlMethods(){document.body.appendChild(this.mobileButtons);var e=Object.keys(o.RUNNING_GAME_KEY_ACTIONS),e=(0,p.trackKeys)(e,(e,t)=>{e=o.RUNNING_GAME_KEY_ACTIONS[e];this.syncAction(e,t)});this.unregisterFunctions.push(e.unregister);const t=e=>{e.key===o.ACTION_KEYS.pauseGame&&(e.preventDefault(),this.onPauseGame())};window.addEventListener("keydown",t),this.unregisterFunctions.push(()=>{window.removeEventListener("keydown",t)}),this.createMobileControls()}manageMobileButtonTouchEvents(r,o){let l=null;const e=e=>{e=e.touches,e=(0,p.findUntrackedTouch)(e,this.trackedTouchIds);e&&(l=e.identifier,this.syncAction(o,!0),r.addEventListener("touchmove",t),r.addEventListener("touchend",s),r.addEventListener("touchcancel",s),r.classList.add("active"))},t=e=>{var t,s,i,n,a,e=e.touches,e=(0,p.findTouch)(e,l);e&&({top:t,left:s,right:i,bottom:n}=r.getBoundingClientRect(),{clientX:e,clientY:a}=e,s<e)&&e<i&&t<a&&a<n?this.syncAction(o,!0):h()},s=()=>{h()},h=(r.addEventListener("touchstart",e),()=>{this.syncAction(o,!1),r.removeEventListener("touchend",s),r.removeEventListener("touchmove",t),r.removeEventListener("touchcancel",s),this.trackedTouchIds=this.trackedTouchIds.filter(e=>e!==l),r.classList.remove("active")});this.unregisterFunctions.push(()=>{r.removeEventListener("touchstart",e),r.removeEventListener("touchmove",t),r.removeEventListener("touchend",s),r.removeEventListener("touchcancel",s),r.classList.remove("active")})}createMobileControls(){var e=(0,p.elt)("button",{className:"fire-btn btn-container__btn"},"fire"),t=(0,p.elt)("button",{className:"move-right-btn btn-container__btn"},"right"),s=(0,p.elt)("button",{className:"move-left-btn btn-container__btn"},"left"),i=(0,p.elt)("button",{className:"pause-btn btn-container__btn",onclick:()=>{this.onPauseGame()}},"pause"),n=(this.pauseBtn=i,new m.default(this.state.volume,this.onChangeVolume));this.mobileVolumeSlider=n,this.manageMobileButtonTouchEvents(s,"moveLeft"),this.manageMobileButtonTouchEvents(t,"moveRight"),this.manageMobileButtonTouchEvents(e,"fire"),this.mobileButtons.appendChild(e),this.mobileButtons.appendChild(s),this.mobileButtons.appendChild(t),this.mobileButtons.appendChild(i),this.mobileButtons.appendChild(n.container)}cleanUp(){super.cleanUp(),this.pauseBtn=null,this.trackedTouchIds=[]}syncState(e,t){this.clearScreen(),e.lastScore.id!==this.lastScore.id&&(this.timeSinceLastScoreChange=0,this.lastScore.id=e.lastScore.id,this.lastScore.value=e.lastScore.value),this.timeSinceLastScoreChange+=t,this.drawFloor(),this.drawPlayer(e.player),this.drawAlienSet(e.alienSet),this.drawBullets(e.bullets),this.drawCollisions(e.bulletCollisions),this.drawWalls(e.env.walls),this.drawMetadata(e,t),null!==e.boss&&this.drawBoss(e.boss),"paused"===e.status&&this.drawPauseHint(),this.pauseBtn.textContent="paused"===e.status?"unpause":"pause",this.mobileVolumeSlider.update(e.volume)}drawFloor(){var e=100-2*o.LAYOUT.padding.hor,e=this.horPixels(e),t=this.verPixels(o.DIMENSIONS.floorHeight),s=this.horPixels(o.LAYOUT.padding.hor),i=this.verPixels(100-o.DIMENSIONS.floorHeight-1.5);this.ctx.fillStyle="#fff",this.ctx.fillRect(s,i,e,t)}drawAlienSet(e){for(var{alien:t,row:s,column:i}of e)null!==t&&(i={x:e.pos.x+i*(o.DIMENSIONS.alienSetGap.w+o.DIMENSIONS.alien.w),y:e.pos.y+s*(o.DIMENSIONS.alienSetGap.h+o.DIMENSIONS.alien.h)},"exploding"!==t?this.drawAlien(t,i,e.aliensStage):this.drawExplosion(i,o.DIMENSIONS.alien))}drawAlien(e,t,s){var{w:i,h:n}=this.getPixelSize(o.DIMENSIONS.alien),{x:t,y:a}=this.getPixelPos(t),r=this["ctx"],e=v[e.alienType][s];r.save(),r.translate(t,a),r.drawImage(f.aliensSprite,e,0,g.w,g.h,0,0,i,n),r.restore()}drawExplosion(e,t,s="#fff"){var{w:t,h:i}=this.getPixelSize(t),{x:e,y:n}=this.getPixelPos(e),i=i/S.numOfRows,t=t/S.numOfColumns;this.ctx.save(),this.ctx.translate(e,n),this.drawPieces(S,{w:t,h:i},s),this.ctx.restore()}drawBullets(e){for(const t of e)this.drawBullet(t)}drawBullet(e){var{x:t,y:s}=this.getPixelPos(e.pos),{w:i,h:n}=this.getPixelSize(e.size),a=this["ctx"];e.wiggly?(e=Math.round(performance.now()/200)%2==1?1:0,a.save(),a.translate(t,s),1==e&&(0,p.flipHorizontally)(a,i/2),a.drawImage(f.wigglyBulletImage,0,0,i,n),a.restore()):(a.fillStyle="#fff",a.fillRect(t,s,i,n))}drawPlayer(e){var t,s,i,n,a,r;"exploding"===e.status?this.drawExplosion(e.pos,o.DIMENSIONS.player):(t="reviving"===e.status?Math.min(e.timeSinceResurrection/d.revivingTime,1):1,{x:s,y:i}=this.getPixelPos(e.pos),{w:n,h:a}=this.getPixelSize(o.DIMENSIONS.player),"reviving"===e.status&&(r=(e=1.2*n)-n,(0,p.drawProgressBar)(this.ctx,t,{x:s-r/2,y:i+1.1*a},{w:e,h:this.verPixels(1)})),this.ctx.save(),this.ctx.translate(s,i),this.ctx.globalAlpha=t,this.ctx.drawImage(f.playerSpaceship,0,0,n,a),this.ctx.restore())}drawBoss(e){var t,s,i,n;"exploding"===e.status?this.drawExplosion(e.pos,o.DIMENSIONS.boss,h.colors.boss):({x:e,y:t}=this.getPixelPos(e.pos),{w:s,h:i}=this.getPixelSize(o.DIMENSIONS.boss),n=this["ctx"],n.save(),n.translate(e,t),n.drawImage(f.bossImage,0,0,s,i),n.restore())}drawWalls(e){for(const t of e)this.drawWall(t)}drawWall(e){var{x:t,y:s}=this.getPixelPos(e.pos),t=(this.ctx.save(),this.ctx.translate(t,s),this.getPixelSize(e.pieceSize));this.drawPieces(e.pieces,t,"#fff"),this.ctx.restore()}drawMetadata(e,t){var s=this.verPixels(o.LAYOUT.padding.ver),{hor:t,ver:s}=(this.setFontSize("md"),this.ctx.textBaseline="top",this.drawScore(e.player.score,this.horPixels(o.LAYOUT.padding.hor),s),this.drawFPS(t,this.horPixels(50),s),this.drawPlayerLives(e.player.lives,this.horPixels(100-o.LAYOUT.padding.hor),s),o.LAYOUT.padding);this.drawVolumeHint(e.volume,{x:t,y:s+5.5})}drawScore(e,t,s){this.ctx.fillStyle="#fff",this.ctx.textAlign="start";var e="SCORE "+e.toString().padStart(5,"0"),t=(this.ctx.fillText(e,t,s),this.ctx.measureText(e));this.lastScore.value&&this.timeSinceLastScoreChange<1&&(e=+this.timeSinceLastScoreChange,this.drawLastScoreAnimation(this.lastScore.value,this.horPixels(o.LAYOUT.padding.hor)+t.width+this.horPixels(2),s,e))}drawLastScoreAnimation(e,t,s,i){var n=i<.2?1:i<.8?2:3;let a=s,r=1;var o=2!=n?this.verPixels(3):0;switch(n){case 1:var l=i/.2;r=l,a+=o*(1-l);break;case 2:break;case 3:l=(i-.8)/.2;r=1-l,a-=o*l}this.ctx.fillStyle=`rgba(255 255 255 / ${r})`,this.ctx.fillText("+"+e,t,a)}drawFPS(e,t,s){e=Math.round(1/e);this.ctx.fillStyle="#fff",this.ctx.textAlign="center",this.ctx.fillText(e+" FPS",t,s)}drawPlayerLives(e,t,s){this.ctx.fillStyle="#fff",this.ctx.textAlign="end",this.ctx.fillText("LIVES "+e,t,s)}drawPauseHint(){var e=this.horPixels(24),t=this.verPixels(10),s=this.horPixels(50)-e/2,i=this.verPixels(50)-t/2;this.ctx.fillStyle="#fff",this.ctx.fillRect(s,i-this.verPixels(.1),e,t),this.ctx.fillStyle="#000",this.setFontSize("lg"),this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillText("PAUSED",this.horPixels(50),this.verPixels(50))}drawCollisions(e){for(const t of e)this.drawExplosion({y:t.pos.y-t.size.h/2,x:t.pos.x-t.size.w/2},t.size)}}t.default=y},9843:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.flipHorizontally=t.findUntrackedTouch=t.findTouch=t.elt=t.drawProgressBar=t.drawTwinkleMessage=t.trackKeys=t.getElementInnerDimensions=void 0,t.getElementInnerDimensions=function(e){var t=getComputedStyle(e),s=parseFloat(t.paddingBlockStart)+parseFloat(t.paddingBlockEnd),i=parseFloat(t.paddingInlineStart)+parseFloat(t.paddingInlineEnd),n=parseFloat(t.marginBlockStart)+parseFloat(t.marginBlockEnd),t=parseFloat(t.marginInlineStart)+parseFloat(t.marginInlineEnd);return{w:e.offsetWidth-i-t,h:e.offsetHeight-s-n}},t.trackKeys=function(i,n){const a={};function e(e){for(const s of i){var t;e.key===s&&(e.preventDefault(),t="keydown"===e.type,a[e.key]=t,n)&&n(s,t)}}return i.forEach(e=>a[e]=!1),window.addEventListener("keydown",e),window.addEventListener("keyup",e),a.unregister=()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",e)},a},t.drawTwinkleMessage=function(e,t,s,i){var{fontSize:i=16,fontFamily:n="monospace",align:a="center",baseline:r="middle",color:o="#fff"}=i||{};Math.round(performance.now()/800)%2==0&&(e.font=i+"px "+n,e.textAlign=a,e.textBaseline=r,e.fillStyle=o,{x:i,y:n}=s,e.fillText(t,i,n))},t.drawProgressBar=function(e,t,s,i,n){var{positiveColor:n="limegreen",negativeColor:a="gray"}=n||{},r=t*i.w,t=(1-t)*i.w;e.fillStyle=n,e.fillRect(s.x,s.y,r,i.h),e.fillStyle=a,e.fillRect(s.x+r,s.y,t,i.h)},t.elt=function(e,t,...s){var i=document.createElement(e);t&&Object.assign(i,t);for(const n of s)"string"==typeof n?i.textContent=n:i.appendChild(n);return i},t.findTouch=function(t,s){for(let e=0;e<t.length;e++)if(t[e].identifier===s)return t[e];return null},t.findUntrackedTouch=function(s,e){for(let t=0;t<s.length;t++)if(!e.some(e=>e===s[t].identifier))return s[t];return null},t.flipHorizontally=function(e,t){e.translate(t,0),e.scale(-1,1),e.translate(-t,0)}},5311:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(s(9932)),n=i(s(6722));t.default=class{constructor(e,t,s){this.pos=e,this.size=t;e=new n.default(s);this.pieceSize={w:t.w/e.pieces[0].length,h:t.h/e.pieces.length},this.pieces=e}getPiecePos(e,t){return{x:this.pos.x+e*this.pieceSize.w,y:this.pos.y+t*this.pieceSize.h}}collide(e,t){if(!(0,r.default)(this.pos,this.size,e,t))return!1;let s=!1;for(var{row:i,column:n,piece:a}of this.pieces)a&&(a=this.getPiecePos(n,i),(0,r.default)(e,t,a,this.pieceSize))&&(this.pieces.breakPiece(n,i),s=s||!0);return s}}},9744:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RUNNING_GAME_KEY_ACTIONS=t.DIMENSIONS=t.LAYOUT=t.ACTION_KEYS=void 0;t.LAYOUT={padding:{hor:3,ver:1.5},numWalls:4,wallsSize:{w:10,h:8.3},wallYPos:70,playerYPos:86,floorYPos:97,bossYPos:10},t.DIMENSIONS={alien:{w:3.5,h:4},player:{w:4,h:6},alienSetGap:{w:1.2,h:2},boss:{w:8,h:5.5},floorHeight:1,bulletCollision:{w:2,h:1.5}};t.ACTION_KEYS={moveRight:"ArrowRight",moveLeft:"ArrowLeft",fire:" ",startGame:" ",restartGame:" ",pauseGame:"Escape",turnUpVolume:"ArrowUp",turnDownVolume:"ArrowDown"};var s={ArrowRight:"moveRight",ArrowLeft:"moveLeft"," ":"fire"};t.RUNNING_GAME_KEY_ACTIONS=s},3607:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},t=(Object.defineProperty(t,"__esModule",{value:!0}),i(s(5251))),n=i(s(2338)),i=i(s(9914));new t.default(i.default,n.default,document.body)},3795:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=`
ZZZZZZZZZZZ
YYYYYYYYYYY
YYYYYYYYYYY
XXXXXXXXXXX
XXXXXXXXXXX
`},6140:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=`
....#.......
....##...###
.....#..##..
.....##.#...
.###........
##......###.
....#.##..##
...##..##...
...#....##..
...#.....#..
`},3083:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fancyWall=t.fancyShieldLikeWall=void 0,t.fancyShieldLikeWall=`
........######################################........
.....############################################.....
...################################################...
..##################################################..
.###################################################..
.############.......##############.......############.
.##########...........##########...........##########.
##########..............######..............##########
#########......##........####.........##.....#########
########......##..........##...........##....#########
########......##.........####..........##.....########
########......###......#########......###.....########
########.......#####..####..######..####......########
########........########......########........########
########.........#####..........#####.........########
#########....................................#########
.#########..................................#########.
..##########..............................##########..
`,t.fancyWall=`
...#...............................................#...
..###.............................................###..
..####...........................................####..
.######....................#....................######.
.#######..................###..................#######.
#########................#####................#########
##########..............#######..............##########
############.........#############.........############
##############..#..#################..#..##############
#######################################################
.#####################################################.
...#################################################...
......###########################################......
........###########..................##########........
..........#######......................#######.........
`;t.default=`
............######################################............
.........############################################.........
.......################################################.......
......##################################################......
....####################################################......
....######################################################....
....######################################################....
....######################################################....
....######################################################....
....######################################################....
....######################################################....
....######################################################....
....#############............................#############....
....############..............................############....
....###########................................###########....
...###########..................................###########...
...###########..................................###########...
..#############................................#############..
.###############..............................###############.
##################..........................##################
`},2402:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HorizontalDirection=void 0,t.HorizontalDirection={Right:1,1:"Right",Left:-1,"-1":"Left"}},5618:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=class s{constructor(e,t){this.x=e,this.y=t}plus(e){return new s(this.x+e.x,this.y+e.y)}minus(e){return new s(this.x-e.x,this.y-e.y)}times(e){return new s(this.x*e,this.y*e)}}},7105:(e,t)=>{function n(e,t){return Math.round(i(e,t))}function i(e,t){var s;return t<e&&(s=t,t=e,e=s),e+Math.random()*(t-e)}Object.defineProperty(t,"__esModule",{value:!0}),t.randomNumberInFactorRange=t.randomNumInSteps=t.randomNum=t.randomInt=void 0,t.randomInt=n,t.randomNum=i,t.randomNumInSteps=function(e,t,s=1){t<e&&(i=t,t=e,e=i);var i=t-e;return e+n(0,Math.floor(i/s))*s},t.randomNumberInFactorRange=function(e,t,s=t){return i((1-t)*e,(1+s)*e)}},9932:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,s,i){return e.x+t.w>s.x&&e.x<s.x+i.w&&e.y+t.h>s.y&&e.y<s.y+i.h}},6888:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t="#"){return e.trim().split("\n").map(e=>[...e].map(e=>e===t))}},8607:(e,t,s)=>{e.exports=s.p+"ceac09b1b3aa6c85662b.mp3"},447:(e,t,s)=>{e.exports=s.p+"02e070370e4a27a64ae8.mp3"},8184:(e,t,s)=>{e.exports=s.p+"0c80a6637cceb2d5356e.mp3"},5826:(e,t,s)=>{e.exports=s.p+"5a6c4895e87bf42c0c2f.mp3"},9854:(e,t,s)=>{e.exports=s.p+"48768c54b5dfba947f20.mp3"},6123:(e,t,s)=>{e.exports=s.p+"fca20ddfa9fa20ba0556.mp3"},1663:(e,t,s)=>{e.exports=s.p+"aab5218dece3ea59a0d0.mp3"},2130:(e,t,s)=>{e.exports=s.p+"de09425c7429b939bc24.mp3"},8582:(e,t,s)=>{e.exports=s.p+"4ec9957d4df5fa2e8531.mp3"},2750:(e,t,s)=>{e.exports=s.p+"d5e50f638b096e9190e7.png"},4873:(e,t,s)=>{e.exports=s.p+"da9ede23a82090924c57.png"},6512:(e,t,s)=>{e.exports=s.p+"6aa073de0ee39c65d504.png"},144:(e,t,s)=>{e.exports=s.p+"f509ef93b23ccdf2d4dd.png"},2584:(e,t,s)=>{e.exports=s.p+"7d18eacc177861913a0c.png"},4462:(e,t,s)=>{e.exports=s.p+"8e603db3d4bdeddc4676.png"},9908:(e,t,s)=>{e.exports=s.p+"75063fe4732528c784c6.png"}},i={};function n(e){var t=i[e];return void 0!==t||(t=i[e]={id:e,exports:{}},s[e].call(t.exports,t,t.exports,n)),t.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.g.importScripts&&(e=n.g.location+"");var e,t=n.g.document;if(!e&&t&&!(e=t.currentScript?t.currentScript.src:e)){var a=t.getElementsByTagName("script");if(a.length)for(var r=a.length-1;-1<r&&!e;)e=a[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e,n.nc=void 0;n(3607)})();